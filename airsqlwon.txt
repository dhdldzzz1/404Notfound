DROP TABLE ARCHIVE;

// 문서 보관소
CREATE TABLE DOC_ARCH (
    ARCH_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 문서 ID
    ARCH_TYPE   CHAR(2) NOT NULL,                                  -- 문서 유형
    ARCH_TITLE   VARCHAR2(500) NOT NULL,                   -- 글 제목
    ARCH_CTNT   VARCHAR2(4000) NOT NULL,                 -- 글 내용
    UDT_DT            CHAR(8)  NOT NULL,                              -- 수정 일자
    UDT_TM           CHAR(6)    NOT NULL,                          -- 수정 시각
    UDT_USER_ID  VARCHAR2(200) NOT NULL ,              -- 수정 사용자 ID
    REG_DT            CHAR(8) NOT NULL,                            -- 등록 일자
    REG_TM           CHAR(6) NOT NULL,                                 -- 등록 시각
    REG_USER_ID  VARCHAR2(200) NOT NULL                    -- 등록 사용자 ID
);


COMMENT ON TABLE DOC_ARCH IS '각종 문서를 보관하고 관리하는 테이블';
COMMENT ON COLUMN DOC_ARCH.ARCH_ID IS '문서의 고유 식별자';
COMMENT ON COLUMN DOC_ARCH.ARCH_TYPE IS '문서의 종류 (예: 운항, 기내 서비스, 안전 교육)';
COMMENT ON COLUMN DOC_ARCH.ARCH_TITLE IS '글 제목‘;
COMMENT ON COLUMN DOC_ARCH.ARCH_CTNT IS ‘글 본문’;
COMMENT ON COLUMN DOC_ARCH.UDT_DT IS ‘수정 일자’;
COMMENT ON COLUMN DOC_ARCH.UPT_TM IS ‘수정 시각’;
COMMENT ON COLUMN DOC_ARCH.UPT_USER_ID IS ‘수정 사용자 ID';
COMMENT ON COLUMN DOC_ARCH.REG_DT IS '등록 일자’;
COMMENT ON COLUMN DOC_ARCH.REG_TM IS ‘등록 시각’;
COMMENT ON COLUMN DOC_ARCH.REG_UNM,./SER_ID IS ‘등록 사용자 ID';

-----------------------------------------------------------

// 첨부 파일
CREATE TABLE ATCH_FILE (
    FILE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 파일 ID
    POST_ID        NUMBER  NOT NULL,        -- 글 ID
    LOGI_PATH   VARCHAR2(500) NOT NULL,                   -- 논리 경로
    PHYS_PATH   VARCHAR2(500) NOT NULL,                 -- 물리 경로
    UDT_DT            CHAR(8)  NOT NULL,                            -- 수정 일자
    UDT_TM           CHAR(6)    NOT NULL,                          -- 수정 시각
    UDT_USER_ID  VARCHAR2(200) NOT NULL ,              -- 수정 사용자 ID
    REG_DT            CHAR(8) NOT NULL,                            -- 등록 일자
    REG_TM           CHAR(6) NOT NULL,                             -- 등록 시각
    REG_USER_ID  VARCHAR2(200) NOT NULL                -- 등록 사용자 ID
);


COMMENT ON TABLE ATCH_FILE IS '첨부파일을 보관하고 관리하는 테이블';
COMMENT ON COLUMN ATCH_FILE.FILE_ID IS '첨부파일의 고유 식별자';
COMMENT ON COLUMN ATCH_FILE.POST_ID  IS '글 ID';
COMMENT ON COLUMN ATCH_FILE.LOGI_PATH IS '논리적 경로';

------------------------------------------------------------
//좋아요
CREATE TABLE LIKES (
    LIKE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 좋아요 ID
    POST_ID NUMBER NOT NULL,                                       -- 글 ID
    UDT_DT CHAR(8) NOT NULL,                                      -- 수정 일자
    UDT_TM CHAR(6) NOT NULL,                                      -- 수정 시각
    UDT_USER_ID VARCHAR2(200) NOT NULL,                           -- 수정 사용자 ID
    REG_DT CHAR(8) NOT NULL,                                      -- 등록 일자
    REG_TM CHAR(6) NOT NULL,                                      -- 등록 시각
    REG_USER_ID VARCHAR2(200) NOT NULL                             -- 등록 사용자 ID
);

COMMENT ON TABLE LIKES IS '좋아요 테이블';

COMMENT ON COLUMN LIKES.LIKE_ID IS '좋아요의 고유 식별자';

COMMENT ON COLUMN LIKES.POST_ID IS '글 ID';

------------------------------------------------------------

//고객응대
CREATE TABLE CUST_HDLG (
    CUST_POST_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 문서 ID
    CUST_ID VARCHAR2(200),
    OCUR_DTTM   CHAR(14) NOT NULL,                                  -- 문서 유형
    LOC   CHAR(2) NOT NULL,                  
    TITLE   VARCHAR2(500) NOT NULL,                
    CTNT   VARCHAR2(4000) NOT NULL,               
    IS_REQ_RSPN    CHAR(1)DEFAULT 'N'  NOT NULL,                 
    IS_URGT   CHAR(1) DEFAULT 'N' NOT NULL,             
    IS_DEL   CHAR(1) DEFAULT 'N' NOT NULL,               
    UDT_DT            CHAR(8)  NOT NULL,                              -- 수정 일자
    UDT_TM           CHAR(6)    NOT NULL,                          -- 수정 시각
    UDT_USER_ID  VARCHAR2(200) NOT NULL ,              -- 수정 사용자 ID
    REG_DT            CHAR(8) NOT NULL,                            -- 등록 일자
    REG_TM           CHAR(6) NOT NULL,                                 -- 등록 시각
    REG_USER_ID  VARCHAR2(200) NOT NULL                    -- 등록 사용자 ID
);

-- 테이블 설명
COMMENT ON TABLE CUST_HDLG IS '고객 문의/불만/요청 등의 처리 이력을 저장하는 테이블';

-- 컬럼 설명
COMMENT ON COLUMN CUST_HDLG.CUST_POST_ID IS '고객 문서(요청/문의 등)의 고유 식별자';
COMMENT ON COLUMN CUST_HDLG.CUST_ID IS '고객 ID 또는 식별자';
COMMENT ON COLUMN CUST_HDLG.OCUR_DTTM IS '문제 발생 일시 (YYYYMMDDHH24MISS)';
COMMENT ON COLUMN CUST_HDLG.LOC IS '발생 지역 코드';
COMMENT ON COLUMN CUST_HDLG.TITLE IS '문서 제목 (요약)';
COMMENT ON COLUMN CUST_HDLG.CTNT IS '문서 본문 내용';
COMMENT ON COLUMN CUST_HDLG.IS_REQ_RSPN IS '회신 요청 여부 (Y/N)';
COMMENT ON COLUMN CUST_HDLG.IS_URGT IS '긴급 여부 (Y/N)';
COMMENT ON COLUMN CUST_HDLG.IS_DEL IS '삭제 여부 (Y/N)';
COMMENT ON COLUMN CUST_HDLG.UDT_DT IS '수정 일자 (YYYYMMDD)';
COMMENT ON COLUMN CUST_HDLG.UDT_TM IS '수정 시각 (HH24MISS)';
COMMENT ON COLUMN CUST_HDLG.UDT_USER_ID IS '수정한 사용자 ID';
COMMENT ON COLUMN CUST_HDLG.REG_DT IS '등록 일자 (YYYYMMDD)';
COMMENT ON COLUMN CUST_HDLG.REG_TM IS '등록 시각 (HH24MISS)';
COMMENT ON COLUMN CUST_HDLG.REG_USER_ID IS '등록한 사용자 ID';

------------------------------------------------------
ALTER TABLE CUST_HDLG
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);


ALTER TABLE LIKES
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);



ALTER TABLE ATCH_FILE
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);

ALTER TABLE DOC_ARCH
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);

-------------------------------------------------------------------------

//고객응대 이력
CREATE TABLE CUST_HDLG_HIST (
    HDLG_HIST_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 응대 이력 고유 ID
    CUST_POST_ID VARCHAR2(200),              -- 원본 문의글 ID (CUST_HDLG.CUST_POST_ID 참조)
    AGNT_ID  VARCHAR2(200) NOT NULL,         -- 응대 담당자 ID
    RSPN_CTNT VARCHAR2(4000) NOT NULL,       -- 응대 내용
    IS_DEL CHAR(1) DEFAULT 'N' NOT NULL,     -- 삭제 여부 (Y/N)
    UDT_DT CHAR(8) NOT NULL,                 -- 수정 일자 (YYYYMMDD)
    UDT_TM CHAR(6) NOT NULL,                 -- 수정 시각 (HHMISS)
    UDT_USER_ID VARCHAR2(200) NOT NULL,      -- 수정한 사용자 ID
    REG_DT CHAR(8) NOT NULL,                 -- 등록 일자 (YYYYMMDD)
    REG_TM CHAR(6) NOT NULL,                 -- 등록 시각 (HHMISS)
    REG_USER_ID VARCHAR2(200) NOT NULL       -- 등록한 사용자 ID
);
-- 테이블 설명
COMMENT ON TABLE CUST_HDLG_HIST IS '고객 문의에 대한 응대 이력을 저장하는 테이블';

-- 컬럼 설명
COMMENT ON COLUMN CUST_HDLG_HIST.HDLG_HIST_ID IS '고객 응대 이력 고유 ID';
COMMENT ON COLUMN CUST_HDLG_HIST.CUST_POST_ID IS '응대한 원본 문의글 ID';
COMMENT ON COLUMN CUST_HDLG_HIST.AGNT_ID IS '응대한 담당자(상담사) ID';
COMMENT ON COLUMN CUST_HDLG_HIST.RSPN_CTNT IS '응대 내용';
COMMENT ON COLUMN CUST_HDLG_HIST.IS_DEL IS '삭제 여부 (Y/N)';
COMMENT ON COLUMN CUST_HDLG_HIST.UDT_DT IS '수정 일자 (YYYYMMDD)';
COMMENT ON COLUMN CUST_HDLG_HIST.UDT_TM IS '수정 시각 (HHMISS)';
COMMENT ON COLUMN CUST_HDLG_HIST.UDT_USER_ID IS '수정한 사용자 ID';
COMMENT ON COLUMN CUST_HDLG_HIST.REG_DT IS '등록 일자 (YYYYMMDD)';
COMMENT ON COLUMN CUST_HDLG_HIST.REG_TM IS '등록 시각 (HHMISS)';
COMMENT ON COLUMN CUST_HDLG_HIST.REG_USER_ID IS '등록한 사용자 ID';

ALTER TABLE CUST_HDLG_HIST
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);

------------------------------------------------------
//댓글
CREATE TABLE CMT (
    CMT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  -- 응대 이력 고유 ID
    POST_ID VARCHAR2(200),              -- 
    CMT_CTNT VARCHAR2(4000) NOT NULL,       -- 
    UDT_DT CHAR(8) NOT NULL,                 -- 수정 일자 (YYYYMMDD)
    UDT_TM CHAR(6) NOT NULL,                 -- 수정 시각 (HHMISS)
    UDT_USER_ID VARCHAR2(200) NOT NULL,      -- 수정한 사용자 ID
    REG_DT CHAR(8) NOT NULL,                 -- 등록 일자 (YYYYMMDD)
    REG_TM CHAR(6) NOT NULL,                 -- 등록 시각 (HHMISS)
    REG_USER_ID VARCHAR2(200) NOT NULL       -- 등록한 사용자 ID
);

-- 테이블 설명
COMMENT ON TABLE CMT IS '고객 문의글(CUST_HDLG)에 대한 댓글 정보를 저장하는 테이블';

-- 컬럼 설명
COMMENT ON COLUMN CMT.CMT_ID IS '댓글의 고유 식별자 (PK)';
COMMENT ON COLUMN CMT.POST_ID IS '연결된 원본 문의글 ID (CUST_HDLG.CUST_POST_ID 참조)';
COMMENT ON COLUMN CMT.CMT_CTNT IS '댓글 내용';
COMMENT ON COLUMN CMT.UDT_DT IS '수정 일자 (형식: YYYYMMDD)';
COMMENT ON COLUMN CMT.UDT_TM IS '수정 시각 (형식: HHMISS)';
COMMENT ON COLUMN CMT.UDT_USER_ID IS '댓글을 수정한 사용자 ID';
COMMENT ON COLUMN CMT.REG_DT IS '등록 일자 (형식: YYYYMMDD)';
COMMENT ON COLUMN CMT.REG_TM IS '등록 시각 (형식: HHMISS)';
COMMENT ON COLUMN CMT.REG_USER_ID IS '댓글을 등록한 사용자 ID';

ALTER TABLE CMT
MODIFY (
UDT_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
UDT_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS')),
REG_DT CHAR(8) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'YYYYMMDD')),
REG_TM CHAR(6) DEFAULT TO_CHAR(TO_CHAR(SYSDATE, 'HH24MISS'))
);
-----------------------------------------------------------